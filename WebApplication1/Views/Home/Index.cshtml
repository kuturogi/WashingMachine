@model IEnumerable<WebApplication1.Models.WashingMachine>

<div class="machine-container">
    @foreach (var machine in Model)
    {
        <div class="washing-machine">
            <div class="header">
                <span class="model">@machine.Model</span>
                <span class="time">@machine.Time</span>
            </div>
            <div class="status">@machine.Status</div>
            <div class="icon">
                <img src="  " alt="Camasir Makinesi" />
             
            </div>
            <div class="water-container">
                <div class="water"></div>
            </div>
            
            <div class="door-handle"></div>


            <div class="details">
                <span class="name">@machine.Name</span>
                <span class="weight">@machine.Weight</span>
            </div>
        </div>
    }
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const statusElements = document.querySelectorAll(".status");
        const waterElements = document.querySelectorAll(".water");
        const waterContainers = document.querySelectorAll(".water-container");

        function updateWaterState() {
            statusElements.forEach((statusElement, index) => {
                const waterContainer = waterContainers[index];
                const waterElement = waterElements[index];

                if (statusElement.textContent.trim() === "ÇALIŞIYOR") {
                    // Çalışıyorsa su kabı görünecek ve animasyon calisacak
                    waterContainer.style.display = "block"; 
                    waterElement.style.height = "61%"; 
                    waterContainer.style.animation = `rotate 1.3s linear infinite`; 
                    waterElement.style.animation = `bounce 1s ease-in-out infinite, wave 1s ease-in-out infinite`; 
                } else {
                    // Çalışmıyorsa su kabını gizlenecek ve animasyon olmayacak

                    waterContainer.style.display = "none"; 
                    waterElement.style.animation = "none"; 
                    waterContainer.style.animation = "none"; 
                }
            });
        }

        // Sayfa yüklendiğinde durumları kontrol et
        updateWaterState();
    });

</script>

<style>
    .door-handle {
        position: absolute;
        top: 60%; 
        left: 84%; 
        transform: translate(-50%, -50%); 
        width: 20px; 
        height: 50px; 
        border: 6px solid #000; 
        border-radius: 8px; 
        background: transparent; 
        z-index: 3; 
    }

    .washing-machine {
        position: relative;
        width: 250px;
        height: 300px;
        background-image: url('./images/image6161.png'); 
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        border: 2px solid #ddd;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 10px;
        box-sizing: border-box;
        overflow : hidden;
    }


    .water-container {
    position: absolute;
    top: 48%; /* Dikey merkezleme */
    left: 34%; /* Yatay merkezleme */
    transform: translate(-50%, -50%);
    width: 83px;
    height: 83px;
    border-radius: 50%; /* Tam daire */
    overflow: hidden;
    background-color: #fff;
    z-index: 2;
}

.water {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%; /* Tam yükseklik */
    background: linear-gradient(180deg, #0077ff, #00f); /* Su renk geçişi */     
    animation: rotate-water 2s linear infinite; /* Dönen su animasyonu */
}

/* Dönen su animasyonu */

   

    @@keyframes bounce {
        0%, 100% {
            transform: translateY(0);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    @@keyframes rotate {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

/* Dalganın Zıplama Hareketi */


@@keyframes wave {
    0% {
        transform: translateX(0);
    }
    50% {
        transform: translateX(0%);
    }
    100% {
        transform: translateX(0);
    }
}
    .machine-container {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        justify-content: center;
    }

 

    .header {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        font-weight: bold;
        color: #000;
        z-index: 2;
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        position: relative;
    }

   

    .model {
        font-size: 20px;
        font-weight: normal;
        color: #000;
        text-transform: uppercase;
        position: relative;
        top : 10px;
        left : 5px;
        z-index: 2;
    }

    .time {
        position: absolute; 
        top: 13px; 
        right: 16px; 
        font-size: 14px; 
        font-weight: lighter; 
        color: #000; 
        background-color: #fff; 
        border-radius: 50px; 
        padding: 2px 13px; 
        text-align: center; 
        z-index: 2; 
    }


    .status {
        font-size: 14px; 
        font-weight: normal;
        color: #000;
        text-align: left; 
        position: absolute; 
        top: 75px; 
        left: 10px; 
        z-index: 2; 
    }

    .icon {
        display: none; /* Orijinal img etiketini gizliyoruz, çünkü arka plan kullanılıyor */
    }

    .details {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: #000;
        width: 100%;
        z-index: 2;
    }

    
   


</style>
